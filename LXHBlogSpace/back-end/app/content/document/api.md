## content 模块的API文档

2019-9-28

ver: 1.0





### 上传图片

接口路径：`/api/v1/content/UploadImage`

请求方法：POST，要求携带用户Cookie。请求消息体应为未经编码的原始图片数据。只允许JPEG, PNG, BMP格式的文件


服务端返回：json，包含以下字段

| 键名       | 说明                                                     |
| ---------- | -------------------------------------------------------- |
| "ecode"    | 字符串类型，错误码为 {0 \| -1}。详见最底部的错误码对照表 |
| "reason"   | 字符串类型，错误原因。                                   |
| "img_path" | 字符串类型。如果上传成功返回图片路径                     |

### 保存草稿

接口路径：`/api/v1/content/SaveDraft`

请求方法：POST，要求携带用户Cookie。请求消息体应为`application/x-www-form/urlencoded`类型，包含以下参数：

| 参数名  | 说明                                                         |
| ------- | ------------------------------------------------------------ |
| bg      | 背景图片的url                                                |
| imgs    | 一个经过json.stringfiy()的array，包含着上传的图片            |
| title   | 文章的标题，应当使用base64进行编码。文章的标题应当不大于20个字符 |
| content | 文章内容，应当使用base64进行编码。文章的字符数应当不大于5000字 |

服务端返回：json，包含以下字段

| 键名     | 说明                      |
| -------- | ------------------------- |
| "ecode"  | 字符串类型，错误码为 {0 \| -2}。详见最底部的错误码对照表 |
| "reason" | 字符串类型，错误原因。 |



### 读取草稿



### 发表文章



### 获取文章数据



### 错误码对照表

| 错误码 | 原因                                            |
| ------ | ----------------------------------------------- |
| 0      | 操作成功                                        |
| -1     | 文件格式错误，只接受png，jpg，以及bmp格式的图片 |
| -2     | 请求参数有误                                    |

