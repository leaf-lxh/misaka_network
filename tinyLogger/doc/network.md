## 通信部分的实现文档

本文档描述了**tinyLogger**的网络通信的实现



### 协议

日志服务的通信基于TCP，并以其为基础，构建了一层自定义协议

自定义协议由两部分组成，报文头和报文体，报文头与报文体之间以两个**CR LF**(即\r\n)作为分隔符

报文头用于存储属性相关的信息，由以下字段构成，每个字段之间以一个**CR LF**作为分隔符

| 字段名      | 说明                   |
| ----------- | ---------------------- |
| version     | 日志服务程序的版本信息 |
| app_name    | 设施名称               |
| app_key     | 在服务端设置的设施密钥 |
| data_length | 数据长度               |

报文体用于存储数据，如日志数据。报文体的数据长度由报文头中的**data_length**字段决定，多出来的数据将会被丢弃

### 数据接收

服务端使用select函数实现IO复用